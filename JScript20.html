<!DOCTYPE html>
<html>
  <head>
    <title>JScript20.html</title>
	
    <meta name="keywords" content="keyword1,keyword2,keyword3">
    <meta name="description" content="this is my page">
    <meta name="content-type" content="text/html; charset=UTF-8">
    
    <link rel="stylesheet" type="text/css" href="./JsCss/JsCss20.css">

  </head>
  
  <body>
  
    <div class="words" contenteditable>
    
    
    <script type="text/javascript">
    	window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    	var recognition = new SpeechRecognition();
    	recognition.lang = 'zh-TW';
    	recognition.interimResult=false;//interimResult ç•¶ä½ è¬›å®Œä¸€æ®µè©±åœé “æ™‚ï¼Œå­—é«”æ‰æœƒé¡¯ç¤ºå‡ºä¾†ï¼Œtrueå°±æœƒæ¯ä¸€è¬›ä¸€å€‹å­—å°±é¡¯ç¤ºå‡ºä¾†
    									
    	let p = document.createElement("p");
    	let words=document.querySelector(".words");
    	words.appendChild(p);
    	
    	recognition.addEventListener('result',function(e){
    		//recognition çš„ result äº‹ä»¶è£¡çš„ results æ˜¯é™£åˆ—
    		//æ‰€ä»¥é€™è£¡è¦ç”¨ Array.from(e.results) ä¾†å‘¼å«
    		//ç”¨map() å–å¾— la[0] (å°±æ˜¯results[0])
    		//åœ¨å–å¾— la[0] çš„ transcript ï¼Œtranscriptå°±æ˜¯æ”¾æ–‡å­—çš„åœ°æ–¹
    		let char = Array.from(e.results)
    		.map(la=>la[0])	
    		.map(la=>la.transcript)
    		.join("");    		
    		console.log(e);
    		
    		let poopScript = char.replace(/poop|shit|poo|dump/gi, 'ğŸ’©');
    		p.textContent=poopScript;
    		
    		if(e.results[0].isFinal){
    			p = document.createElement("p");//é€™è£¡å°‡å†å»ºç«‹ä¸€å€‹HTML tag <p>ï¼Œå¦‚æœä¸åšï¼Œæ–‡å­—å°‡æœƒè¢«è¦†è“‹
    			words.appendChild(p);
    		}
    	});
    	recognition.addEventListener("end",recognition.start);
    	recognition.start();
    </script>
  </body>
</html>

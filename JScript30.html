<!DOCTYPE html>
<html>
  <head>
    <title>JScript30.html</title>
	
    <meta name="keywords" content="keyword1,keyword2,keyword3">
    <meta name="description" content="this is my page">
    <meta name="content-type" content="text/html; charset=UTF-8">
    <link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="./JsCss/JsCss30.css" charset="UTF-8">

  </head>
  
  <body>
  <h1>Whack-a-mole! <span class="score">0</span></h1>
  <button onClick="startGame()">Start!</button>

  <div class="game">
    <div class="hole hole1">
      <div class="mole"></div>
    </div>
    <div class="hole hole2">
      <div class="mole"></div>
    </div>
    <div class="hole hole3">
      <div class="mole"></div>
    </div>
    <div class="hole hole4">
      <div class="mole"></div>
    </div>
    <div class="hole hole5">
      <div class="mole"></div>
    </div>
    <div class="hole hole6">
      <div class="mole"></div>
    </div>
  </div>
  <script type="text/javascript">
  	let scoreBard =document.querySelector(".score");
  	let holes = document.querySelectorAll(".hole");
  	let moles = Array.from(document.querySelectorAll(".mole"));
  	let end;
  	let t=1;
  	let sore =0;
	function startGame(){
		clearTimeout(end);
		t=1;
		sore =0;
		scoreBard.textContent=`${sore}`;
		randArray();
	}
	function randArray(){
		let index = Math.floor(Math.random()*moles.length);		
		let sec = Math.floor(Math.random()*500)+500;
		end=setTimeout(()=>{
			moles[index].classList.remove("up");
			randArray();
			},sec);	
			moles[index].classList.add("up");	
		console.log(moles[index],t);		
		t= t < 20 ? t+1 :  endTime(index);
	}
	function downMole(e){
		e.target.classList.remove("up");
		if (e.toElement.className === "mole"){
			sore+=1;
			scoreBard.textContent=`${sore}`;
		}
	}
	function endTime(idx){
		moles[idx].classList.remove("up");
		clearTimeout(end);
	}
	holes.forEach(hole=>hole.addEventListener("mousedown",downMole));
  </script>
  </body>
</html>
